From dba82ad3718c203637877f7e9f907dac65d0da08 Mon Sep 17 00:00:00 2001
From: pceiley <pceiley@users.noreply.github.com>
Date: Thu, 13 Sep 2018 15:02:56 +1000
Subject: [PATCH 2/6] Disable First Run Pages

---
 .../browser/firstrun/FirstRunFlowSequencer.java     | 13 +++++++++----
 .../browser/firstrun/FirstRunSignInProcessor.java   |  5 +++--
 2 files changed, 12 insertions(+), 6 deletions(-)

diff --git a/chrome/android/java/src/org/chromium/chrome/browser/firstrun/FirstRunFlowSequencer.java b/chrome/android/java/src/org/chromium/chrome/browser/firstrun/FirstRunFlowSequencer.java
index af7feb746157..165787dc8f2c 100644
--- a/chrome/android/java/src/org/chromium/chrome/browser/firstrun/FirstRunFlowSequencer.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/firstrun/FirstRunFlowSequencer.java
@@ -80,7 +80,10 @@ public abstract class FirstRunFlowSequencer  {
      * Once finished, calls onFlowIsKnown().
      */
     public void start() {
-        if (CommandLine.getInstance().hasSwitch(ChromeSwitches.DISABLE_FIRST_RUN_EXPERIENCE)
+        onFlowIsKnown(null);
+        return;
+
+        /*if (CommandLine.getInstance().hasSwitch(ChromeSwitches.DISABLE_FIRST_RUN_EXPERIENCE)
                 || ApiCompatibilityUtils.isDemoUser(mActivity)) {
             onFlowIsKnown(null);
             return;
@@ -92,7 +95,7 @@ public abstract class FirstRunFlowSequencer  {
                 initializeSharedState(isAndroidEduDevice(), getChildAccountStatus());
                 processFreEnvironmentPreNative();
             }
-        }.start();
+        }.start();*/
     }
 
     @VisibleForTesting
@@ -244,7 +247,9 @@ public abstract class FirstRunFlowSequencer  {
     public static boolean checkIfFirstRunIsNecessary(
             Context context, Intent fromIntent, boolean preferLightweightFre) {
         // If FRE is disabled (e.g. in tests), proceed directly to the intent handling.
-        if (CommandLine.getInstance().hasSwitch(ChromeSwitches.DISABLE_FIRST_RUN_EXPERIENCE)
+	return false;
+
+        /*if (CommandLine.getInstance().hasSwitch(ChromeSwitches.DISABLE_FIRST_RUN_EXPERIENCE)
                 || ApiCompatibilityUtils.isDemoUser(context)) {
             return false;
         }
@@ -262,7 +267,7 @@ public abstract class FirstRunFlowSequencer  {
         }
         return !preferLightweightFre
                 || (!FirstRunStatus.shouldSkipWelcomePage()
-                           && !FirstRunStatus.getLightweightFirstRunFlowComplete());
+                           && !FirstRunStatus.getLightweightFirstRunFlowComplete());*/
     }
 
     /**
diff --git a/chrome/android/java/src/org/chromium/chrome/browser/firstrun/FirstRunSignInProcessor.java b/chrome/android/java/src/org/chromium/chrome/browser/firstrun/FirstRunSignInProcessor.java
index d404a34812d5..d7ac34f4d6c4 100644
--- a/chrome/android/java/src/org/chromium/chrome/browser/firstrun/FirstRunSignInProcessor.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/firstrun/FirstRunSignInProcessor.java
@@ -58,7 +58,8 @@ public final class FirstRunSignInProcessor {
         // We skip signin and the FRE if
         // - FRE is disabled, or
         // - FRE hasn't been completed, but the user has already seen the ToS in the Setup Wizard.
-        if (CommandLine.getInstance().hasSwitch(ChromeSwitches.DISABLE_FIRST_RUN_EXPERIENCE)
+	return;
+        /*if (CommandLine.getInstance().hasSwitch(ChromeSwitches.DISABLE_FIRST_RUN_EXPERIENCE)
                 || ApiCompatibilityUtils.isDemoUser(activity)
                 || (!firstRunFlowComplete && ToSAckedReceiver.checkAnyUserHasSeenToS())) {
             return;
@@ -98,7 +99,7 @@ public final class FirstRunSignInProcessor {
                 // accepted the terms of service.
                 setFirstRunFlowSignInComplete(true);
             }
-        });
+        });*/
     }
 
     /**
-- 
2.18.0

